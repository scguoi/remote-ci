# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Architecture

This is a **æ™ºèƒ½å¤šè¯­è¨€CI/CDå·¥å…·é“¾**ï¼Œæ”¯æŒGoã€Javaã€Pythonå’ŒTypeScripté¡¹ç›®çš„ç»Ÿä¸€å¼€å‘å·¥ä½œæµã€‚ä»95ä¸ªå¤æ‚å‘½ä»¤ä¼˜åŒ–ä¸º15ä¸ªæ™ºèƒ½å‘½ä»¤ï¼Œå¤§å¹…æå‡å¼€å‘è€…ä½“éªŒã€‚

### Key Architecture Components

- **æ™ºèƒ½Makefileç³»ç»Ÿ**: 15ä¸ªæ ¸å¿ƒå‘½ä»¤æ›¿ä»£åŸæœ‰95ä¸ªå‘½ä»¤
- **è‡ªåŠ¨é¡¹ç›®æ£€æµ‹**: æ™ºèƒ½è¯†åˆ«Goã€Javaã€Pythonã€TypeScripté¡¹ç›®
- **ç»Ÿä¸€å·¥ä½œæµ**: formatã€checkã€testã€buildç­‰æ“ä½œè‡ªåŠ¨é€‚é…æ‰€æœ‰è¯­è¨€
- **å®Œç¾å‘åå…¼å®¹**: æ‰€æœ‰åŸæœ‰95ä¸ªå‘½ä»¤ä»ç„¶å¯ç”¨
- **Gité’©å­ç®¡ç†**: è‡ªåŠ¨åŒ–çš„ä»£ç è´¨é‡æ£€æŸ¥å’Œæäº¤è§„èŒƒ

### é¡¹ç›®ç»“æ„

```
remote-ci/
â”œâ”€â”€ Makefile                    # 15ä¸ªæ™ºèƒ½æ ¸å¿ƒå‘½ä»¤
â”œâ”€â”€ makefiles/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ detection.mk        # æ™ºèƒ½é¡¹ç›®æ£€æµ‹
â”‚   â”‚   â””â”€â”€ workflows.mk        # æ ¸å¿ƒå·¥ä½œæµ
â”‚   â”œâ”€â”€ go.mk                   # Goè¯­è¨€æ”¯æŒ
â”‚   â”œâ”€â”€ java.mk                 # Java/Mavenæ”¯æŒ  
â”‚   â”œâ”€â”€ python.mk               # Python/FastAPIæ”¯æŒ
â”‚   â”œâ”€â”€ typescript.mk           # TypeScript/Nodeæ”¯æŒ
â”‚   â””â”€â”€ git.mk                  # Gité’©å­å’Œåˆ†æ”¯ç®¡ç†
â”œâ”€â”€ backend-go/                 # Goå¾®æœåŠ¡é¡¹ç›®
â”œâ”€â”€ backend-java/               # Java Spring Booté¡¹ç›®
â”œâ”€â”€ backend-python/             # Python FastAPIé¡¹ç›®
â”œâ”€â”€ frontend-ts/                # TypeScriptå‰ç«¯é¡¹ç›®
â””â”€â”€ archives/                   # å¤‡ä»½æ–‡ä»¶å­˜æ¡£
```

### æ™ºèƒ½æ£€æµ‹æœºåˆ¶

ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹æ´»è·ƒé¡¹ç›®å¹¶æ™ºèƒ½æ‰§è¡Œæ“ä½œï¼š
- **Go**: æ£€æµ‹`backend-go/go.mod`å’Œ`cmd/`ç›®å½•
- **Java**: æ£€æµ‹`backend-java/pom.xml`å’ŒMavenæ¨¡å—
- **Python**: æ£€æµ‹`backend-python/main.py`å’Œ`requirements.txt`
- **TypeScript**: æ£€æµ‹`frontend-ts/package.json`å’Œ`tsconfig.json`

## Essential Commands - æ–°çš„æ™ºèƒ½å‘½ä»¤ä½“ç³»

### ğŸš€ æ—¥å¸¸æ ¸å¿ƒå‘½ä»¤ (8ä¸ª) - é›¶å­¦ä¹ æˆæœ¬
```bash
make setup      # ğŸ› ï¸ ä¸€æ¬¡æ€§ç¯å¢ƒæ­å»º (å·¥å…·+é’©å­+åˆ†æ”¯ç­–ç•¥)
make format     # âœ¨ æ™ºèƒ½æ ¼å¼åŒ– (è‡ªåŠ¨æ£€æµ‹æ‰€æœ‰é¡¹ç›®)
make check      # ğŸ” æ™ºèƒ½è´¨é‡æ£€æŸ¥ (è‡ªåŠ¨æ£€æµ‹æ‰€æœ‰é¡¹ç›®)
make test       # ğŸ§ª æ™ºèƒ½æµ‹è¯•è¿è¡Œ (è‡ªåŠ¨æ£€æµ‹æ‰€æœ‰é¡¹ç›®)
make build      # ğŸ“¦ æ™ºèƒ½é¡¹ç›®æ„å»º (è‡ªåŠ¨æ£€æµ‹æ‰€æœ‰é¡¹ç›®)
make dev        # ğŸš€ æ™ºèƒ½å¼€å‘æœåŠ¡å™¨ (æ ¹æ®ä¸Šä¸‹æ–‡å¯åŠ¨)
make push       # ğŸ“¤ å®‰å…¨æ¨é€ (é¢„æ£€æŸ¥+åˆ†æ”¯éªŒè¯)
make clean      # ğŸ§¹ æ™ºèƒ½æ¸…ç†æ„å»ºäº§ç‰©
```

### ğŸ”§ ä¸“ä¸šå‘½ä»¤ (5ä¸ª)
```bash
make status     # ğŸ“Š æ˜¾ç¤ºè¯¦ç»†é¡¹ç›®çŠ¶æ€
make info       # â„¹ï¸ æ˜¾ç¤ºå·¥å…·å’Œä¾èµ–ä¿¡æ¯
make lint       # ğŸ”§ è¿è¡Œä»£ç æ£€æŸ¥ (checkçš„åˆ«å)
make fix        # ğŸ› ï¸ è‡ªåŠ¨ä¿®å¤ä»£ç é—®é¢˜
make ci         # ğŸ¤– å®Œæ•´CIæµç¨‹ (format+check+test+build)
```

### âš™ï¸ é«˜çº§å‘½ä»¤ (2ä¸ª)
```bash
make hooks      # âš™ï¸ Gité’©å­ç®¡ç†èœå•
make enable-legacy # ğŸ”„ å¯ç”¨å®Œæ•´æ—§å‘½ä»¤é›† (å‘åå…¼å®¹)
```

### å‘åå…¼å®¹ - æ—§å‘½ä»¤ä¾ç„¶å¯ç”¨
```bash
make enable-legacy  # å¯ç”¨åå¯ä»¥ä½¿ç”¨ï¼š
make fmt-go         # åŸGoæ ¼å¼åŒ–å‘½ä»¤
make check-java     # åŸJavaæ£€æŸ¥å‘½ä»¤  
make test-python    # åŸPythonæµ‹è¯•å‘½ä»¤
# ... æ‰€æœ‰95ä¸ªåŸå‘½ä»¤éƒ½ä¿ç•™
```

## æ™ºèƒ½ç‰¹æ€§å±•ç¤º

### è‡ªåŠ¨é¡¹ç›®æ£€æµ‹
```bash
$ make status
æ£€æµ‹åˆ°çš„æ´»è·ƒé¡¹ç›®: go java python typescript
æ´»è·ƒé¡¹ç›®æ•°é‡: 4
å¤šé¡¹ç›®ç¯å¢ƒ: true
```

### ä¸Šä¸‹æ–‡æ„ŸçŸ¥å¼€å‘æœåŠ¡å™¨
```bash
cd backend-go && make dev      # å¯åŠ¨GoæœåŠ¡
cd frontend-ts && make dev     # å¯åŠ¨TypeScriptå¼€å‘æœåŠ¡å™¨
cd backend-python && make dev  # å¯åŠ¨Python FastAPIæœåŠ¡
make dev                       # åœ¨æ ¹ç›®å½•æ˜¾ç¤ºé€‰é¡¹èœå•
```

### æ™ºèƒ½æ‰¹é‡æ“ä½œ
```bash
make format  # è‡ªåŠ¨æ ¼å¼åŒ–æ‰€æœ‰4ç§è¯­è¨€çš„ä»£ç 
make check   # è‡ªåŠ¨æ£€æŸ¥æ‰€æœ‰4ç§è¯­è¨€çš„ä»£ç è´¨é‡
make test    # è‡ªåŠ¨è¿è¡Œæ‰€æœ‰3ç§è¯­è¨€çš„æµ‹è¯• (TypeScriptæš‚è·³è¿‡)
```

## Code Quality Standards

### å¤šè¯­è¨€ç»Ÿä¸€æ ‡å‡†
- **Go**: gofmt + goimports + gofumpt + golines + staticcheck + golangci-lint
- **Java**: Spotless + Checkstyle + PMD + SpotBugs  
- **Python**: black + isort + flake8 + mypy + pylint
- **TypeScript**: prettier + eslint + tsc

### Quality Gates
- **ä»£ç æ ¼å¼**: å¿…é¡»é€šè¿‡å„è¯­è¨€çš„æ ¼å¼åŒ–å·¥å…·
- **é™æ€åˆ†æ**: å¿…é¡»é€šè¿‡å„è¯­è¨€çš„é™æ€æ£€æŸ¥å·¥å…·
- **ç±»å‹æ£€æŸ¥**: TypeScriptå’ŒPythonå¿…é¡»é€šè¿‡ç±»å‹æ£€æŸ¥
- **æäº¤è§„èŒƒ**: éµå¾ªConventional Commitsæ ¼å¼
- **åˆ†æ”¯å‘½å**: éµå¾ª`feature-*`ã€`bugfix-*`ã€`hotfix-*`æ¨¡å¼

## Development Workflow

### æ¨èçš„å¼€å‘æµç¨‹
```bash
# 1. ç¯å¢ƒæ­å»º (ä»…éœ€ä¸€æ¬¡)
make setup

# 2. æ—¥å¸¸å¼€å‘å¾ªç¯
make format     # æ ¼å¼åŒ–ä»£ç 
make check      # è´¨é‡æ£€æŸ¥
make test       # è¿è¡Œæµ‹è¯•  
make push       # å®‰å…¨æ¨é€

# 3. é¡¹ç›®å‘å¸ƒ
make ci         # å®Œæ•´CIæµç¨‹
make build      # æ„å»ºæ‰€æœ‰é¡¹ç›®
```

### Gité’©å­è‡ªåŠ¨åŒ–
- **pre-commit**: è‡ªåŠ¨æ ¼å¼åŒ– + è´¨é‡æ£€æŸ¥
- **commit-msg**: éªŒè¯æäº¤æ¶ˆæ¯æ ¼å¼
- **pre-push**: éªŒè¯åˆ†æ”¯å‘½åè§„èŒƒ

## Troubleshooting

### å·¥å…·ç›¸å…³é—®é¢˜
```bash
make info           # æŸ¥çœ‹æ‰€æœ‰å·¥å…·çŠ¶æ€
make check-tools-go # æ£€æŸ¥Goå·¥å…·
make install-tools  # é‡æ–°å®‰è£…æ‰€æœ‰å·¥å…·
```

### é¡¹ç›®æ£€æµ‹é—®é¢˜
```bash
make _debug         # æ˜¾ç¤ºæ£€æµ‹è°ƒè¯•ä¿¡æ¯
make status         # æ˜¾ç¤ºé¡¹ç›®çŠ¶æ€è¯¦æƒ…
```

### æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨`make hooks-install-basic`å®‰è£…è½»é‡çº§é’©å­
- å¤§é¡¹ç›®å¯ä»¥åˆ†åˆ«åœ¨å­ç›®å½•ä¸­è¿è¡Œå‘½ä»¤
- CIç¯å¢ƒæ¨èä½¿ç”¨`make ci`è¿›è¡Œå®Œæ•´æ£€æŸ¥

## é‡è¦æé†’

### è¿™æ˜¯å¤šè¯­è¨€å·¥å…·é“¾é¡¹ç›®
- **æ ¸å¿ƒä»·å€¼**: ç»Ÿä¸€çš„å¤šè¯­è¨€å¼€å‘å·¥ä½œæµï¼Œè€Œä¸æ˜¯å•ä¸€åº”ç”¨
- **æ™ºèƒ½åŒ–**: è‡ªåŠ¨æ£€æµ‹é¡¹ç›®ç±»å‹ï¼Œé›¶é…ç½®ä½¿ç”¨
- **å‘åå…¼å®¹**: ä¿ç•™æ‰€æœ‰åŸæœ‰åŠŸèƒ½ï¼Œå¹³æ»‘è¿ç§»

### ä¼˜åŒ–æˆæœ
- **å‘½ä»¤ç®€åŒ–**: ä»95ä¸ªå‘½ä»¤å‡å°‘åˆ°15ä¸ªæ ¸å¿ƒå‘½ä»¤ (å‡å°‘84%)
- **é›¶å­¦ä¹ æˆæœ¬**: å¼€å‘è€…åªéœ€è®°ä½8ä¸ªæ—¥å¸¸å‘½ä»¤
- **æ™ºèƒ½åŒ–æ“ä½œ**: ä¸€ä¸ªå‘½ä»¤å¤„ç†å¤šç§è¯­è¨€
- **å®Œç¾å…¼å®¹**: æ‰€æœ‰æ—§å‘½ä»¤ä»å¯ä½¿ç”¨

è¯¦ç»†æ–‡æ¡£è¯·å‚è€ƒï¼š`Makefile-readme.md`